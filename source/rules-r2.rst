.. _rules-r2:

====================
ルール(Round 2)
====================

Opening Phase Round2でのネットワークのルールを説明します。

------------------------------------------------------------------------------

設定情報
==========================

Emethクライアントに設定する設定情報は以下の通りです。

.. csv-table:: Round 2 設定情報

   "| EmethCoreコントラクト 
   | (emethConttactAddress).", "0x985C36Ab085cff3D7B48980084F0181A6c6a637C"
   "| EMTトークンコントラクト
   | (tokenContractAddress)", "0x3dAC4e087d0AF73419F3F9E9436Ef2C1f3bC0b2A"
   "| Storage API
   | (storageApi)", "ec2-13-208-214-161.ap-northeast-3.compute.amazonaws.com"
   "| RPCエンドポイント
   | (endpoint)", "https://testnet.alt.ai"


------------------------------------------------------------------------------

ネットワーク情報
==========================

Emethネットワークの設定情報です。

.. csv-table:: Round 2 ネットワーク情報

    "Verifier fee", "10 EMT / JOB", "Verify成功時にJOBの持つTransaction Feeから、失敗時にはノードのDepositから徴収されます"
    "Deposit係数", "1 EMT / Power Capacity", "ノードのattachに必要なDeposit量は、PowerCapacityに応じて決まります。"

------------------------------------------------------------------------------


JOBの割当
===========================

Emeth Coreコントラクトにattachされたノードには、ネットワークからJOBがアサインされます。
JOBとは、ユーザによってネットワークに投入された計算依頼のことです。
本来はモデル計算を行いたいユーザからのJOBがネットワークに流れるものですが、Opening Phaseでは
まだ十分な依頼者がいないため、予め用意されたリクエスターBOTにが常時JOBを投入します。

Round 2で投入されるJOBは、サイズ・データセットのバリエーションがRound 1に比べて増えました。
そのため、1つのJOBあたりの処理にかかる時間は、同じノードでも一定ではありません。

最大で、各ノードに接続しているworkerの数と同じ数のJOBが同時に割当てられます。

------------------------------------------------------------------------------

計算結果の検査
===========================

ノードがJOBを引き受けると、GPUを用いた計算処理が始まります。
計算にかかる時間はマシンスペックとconfigのパラメータによって変わります。

【参考】GeFource RTX 3080 (GPU Memory 10GB)、batchsize=3, epoch=2の場合で100MBサイズのデータセットに対して1JOBあたり約6時間程度

計算が完了すると、ノードはネットワークに結果をsubmitします。
ネットワークに常駐するVerifierによって計算結果の検査が行われ、十分な精度のモデルができているか判定されます。

検査をパスするとJOBは完了となり、リワードを獲得するためのシェアを得ます。
検査をパスできない場合、シェアは得られません。

パスできない場合はepochの値を増やすことで精度が高まります。

------------------------------------------------------------------------------

1日あたりの処理上限
===========================

Opening Phaseではまだネットワーク参加者が少ないため、報酬トークンの極端な偏りを防ぐ措置として
1ノード辺りの獲得できるシェアに上限を設けています。

100MBデータセットのJOBで換算すると1日あたり約16個ですが、JOBの大きさによって処理完了時のシェアの獲得量が異なります。
日が変わるとシェアの計算はリセットされます。1日の起点はUTC 0:00です。




